{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar initialState = {\n  shop: null\n};\nexport var ADD_PRODUCT_REQUEST = \"ADD_PRODUCT_REQUEST\";\nexport var ADD_PRODUCT_SUCCESS = \"ADD_PRODUCT_SUCCESS\";\nexport var ADD_PRODUCT_FAILURE = \"ADD_PRODUCT_FAILURE\";\n\nvar reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_PRODUCT_REQUEST:\n      {\n        return _objectSpread({}, state);\n      }\n\n    case ADD_PRODUCT_SUCCESS:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          products: [action.data].concat(_toConsumableArray(state.products))\n        });\n      }\n\n    case ADD_PRODUCT_FAILURE:\n      {\n        return _objectSpread({}, state);\n      }\n\n    case REMOVE_CART_ITEM_REQUEST:\n      {\n        var items = state.cart.filter(function (v) {\n          return v.id !== action.id;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          cart: _toConsumableArray(items)\n        });\n      }\n\n    case ADD_CART_ITEM_REQUEST:\n      {\n        var listIndex = state.cart.findIndex(function (v) {\n          return v.id === action.id;\n        });\n        var itemIndex = state.products.findIndex(function (v) {\n          return v.id === action.id;\n        });\n\n        if (listIndex !== -1) {\n          var cart = _toConsumableArray(state.cart);\n\n          var products = _toConsumableArray(state.products);\n\n          var item = products[itemIndex];\n          var cartItem = cart[listIndex];\n          cart[listIndex].quantity = cartItem.quantity + item.quantity;\n          var productsList = [].concat(_toConsumableArray(state.products.filter(function (v) {\n            return v.id !== action.id;\n          })), [_objectSpread(_objectSpread({}, item), {}, {\n            quantity: 1\n          })]).sort(function (a, b) {\n            return a.id < b.id ? -1 : a.id > b.id ? 1 : 0;\n          });\n          console.log(cart);\n          return _objectSpread(_objectSpread({}, state), {}, {\n            products: productsList,\n            cart: cart\n          });\n        } else {\n          var _products = _toConsumableArray(state.products);\n\n          var _item = _products[itemIndex];\n\n          var _productsList = [].concat(_toConsumableArray(state.products.filter(function (v) {\n            return v.id !== action.id;\n          })), [_objectSpread(_objectSpread({}, _item), {}, {\n            quantity: 1\n          })]).sort(function (a, b) {\n            return a.id < b.id ? -1 : a.id > b.id ? 1 : 0;\n          });\n\n          return _objectSpread(_objectSpread({}, state), {}, {\n            products: _productsList,\n            cart: [].concat(_toConsumableArray(state.cart), [_item])\n          });\n        }\n      }\n\n    default:\n      {\n        return _objectSpread({}, state);\n      }\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["C:/Users/hoyuen/Documents/project/project1/frontend/reducers/shop.js"],"names":["initialState","shop","ADD_PRODUCT_REQUEST","ADD_PRODUCT_SUCCESS","ADD_PRODUCT_FAILURE","reducer","state","action","type","products","data","REMOVE_CART_ITEM_REQUEST","items","cart","filter","v","id","ADD_CART_ITEM_REQUEST","listIndex","findIndex","itemIndex","item","cartItem","quantity","productsList","sort","a","b","console","log"],"mappings":"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","sourcesContent":["const initialState = {\r\n  shop: null,\r\n};\r\n\r\nexport const ADD_PRODUCT_REQUEST = \"ADD_PRODUCT_REQUEST\";\r\nexport const ADD_PRODUCT_SUCCESS = \"ADD_PRODUCT_SUCCESS\";\r\nexport const ADD_PRODUCT_FAILURE = \"ADD_PRODUCT_FAILURE\";\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_PRODUCT_REQUEST: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n\r\n    case ADD_PRODUCT_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        products: [action.data, ...state.products],\r\n      };\r\n    }\r\n\r\n    case ADD_PRODUCT_FAILURE: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n\r\n    case REMOVE_CART_ITEM_REQUEST: {\r\n      const items = state.cart.filter((v) => v.id !== action.id);\r\n      return {\r\n        ...state,\r\n        cart: [...items],\r\n      };\r\n    }\r\n\r\n    case ADD_CART_ITEM_REQUEST: {\r\n      const listIndex = state.cart.findIndex((v) => v.id === action.id);\r\n      const itemIndex = state.products.findIndex((v) => v.id === action.id);\r\n      if (listIndex !== -1) {\r\n        const cart = [...state.cart];\r\n        const products = [...state.products];\r\n        const item = products[itemIndex];\r\n        const cartItem = cart[listIndex];\r\n        cart[listIndex].quantity = cartItem.quantity + item.quantity;\r\n        const productsList = [\r\n          ...state.products.filter((v) => v.id !== action.id),\r\n          { ...item, quantity: 1 },\r\n        ].sort((a, b) => {\r\n          return a.id < b.id ? -1 : a.id > b.id ? 1 : 0;\r\n        });\r\n        console.log(cart);\r\n        return {\r\n          ...state,\r\n          products: productsList,\r\n          cart: cart,\r\n        };\r\n      } else {\r\n        const products = [...state.products];\r\n        const item = products[itemIndex];\r\n        const productsList = [\r\n          ...state.products.filter((v) => v.id !== action.id),\r\n          { ...item, quantity: 1 },\r\n        ].sort((a, b) => {\r\n          return a.id < b.id ? -1 : a.id > b.id ? 1 : 0;\r\n        });\r\n        return {\r\n          ...state,\r\n          products: productsList,\r\n          cart: [...state.cart, item],\r\n        };\r\n      }\r\n    }\r\n\r\n    default: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n"]},"metadata":{},"sourceType":"module"}