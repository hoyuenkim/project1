{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst initialState = {\n  shop: null\n};\nexport const ADD_PRODUCT_REQUEST = \"ADD_PRODUCT_REQUEST\";\nexport const ADD_PRODUCT_SUCCESS = \"ADD_PRODUCT_SUCCESS\";\nexport const ADD_PRODUCT_FAILURE = \"ADD_PRODUCT_FAILURE\";\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_PRODUCT_REQUEST:\n      {\n        return _objectSpread({}, state);\n      }\n\n    case ADD_PRODUCT_SUCCESS:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          products: [action.data, ...state.products]\n        });\n      }\n\n    case ADD_PRODUCT_FAILURE:\n      {\n        return _objectSpread({}, state);\n      }\n\n    case REMOVE_CART_ITEM_REQUEST:\n      {\n        const items = state.cart.filter(v => v.id !== action.id);\n        return _objectSpread(_objectSpread({}, state), {}, {\n          cart: [...items]\n        });\n      }\n\n    case ADD_CART_ITEM_REQUEST:\n      {\n        const listIndex = state.cart.findIndex(v => v.id === action.id);\n        const itemIndex = state.products.findIndex(v => v.id === action.id);\n\n        if (listIndex !== -1) {\n          const cart = [...state.cart];\n          const products = [...state.products];\n          const item = products[itemIndex];\n          const cartItem = cart[listIndex];\n          cart[listIndex].quantity = cartItem.quantity + item.quantity;\n          const productsList = [...state.products.filter(v => v.id !== action.id), _objectSpread(_objectSpread({}, item), {}, {\n            quantity: 1\n          })].sort((a, b) => {\n            return a.id < b.id ? -1 : a.id > b.id ? 1 : 0;\n          });\n          console.log(cart);\n          return _objectSpread(_objectSpread({}, state), {}, {\n            products: productsList,\n            cart: cart\n          });\n        } else {\n          const products = [...state.products];\n          const item = products[itemIndex];\n          const productsList = [...state.products.filter(v => v.id !== action.id), _objectSpread(_objectSpread({}, item), {}, {\n            quantity: 1\n          })].sort((a, b) => {\n            return a.id < b.id ? -1 : a.id > b.id ? 1 : 0;\n          });\n          return _objectSpread(_objectSpread({}, state), {}, {\n            products: productsList,\n            cart: [...state.cart, item]\n          });\n        }\n      }\n\n    default:\n      {\n        return _objectSpread({}, state);\n      }\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["C:/Users/hoyuen/Documents/project/project1/frontend/reducers/shop.js"],"names":["initialState","shop","ADD_PRODUCT_REQUEST","ADD_PRODUCT_SUCCESS","ADD_PRODUCT_FAILURE","reducer","state","action","type","products","data","REMOVE_CART_ITEM_REQUEST","items","cart","filter","v","id","ADD_CART_ITEM_REQUEST","listIndex","findIndex","itemIndex","item","cartItem","quantity","productsList","sort","a","b","console","log"],"mappings":"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","sourcesContent":["const initialState = {\r\n  shop: null,\r\n};\r\n\r\nexport const ADD_PRODUCT_REQUEST = \"ADD_PRODUCT_REQUEST\";\r\nexport const ADD_PRODUCT_SUCCESS = \"ADD_PRODUCT_SUCCESS\";\r\nexport const ADD_PRODUCT_FAILURE = \"ADD_PRODUCT_FAILURE\";\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_PRODUCT_REQUEST: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n\r\n    case ADD_PRODUCT_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        products: [action.data, ...state.products],\r\n      };\r\n    }\r\n\r\n    case ADD_PRODUCT_FAILURE: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n\r\n    case REMOVE_CART_ITEM_REQUEST: {\r\n      const items = state.cart.filter((v) => v.id !== action.id);\r\n      return {\r\n        ...state,\r\n        cart: [...items],\r\n      };\r\n    }\r\n\r\n    case ADD_CART_ITEM_REQUEST: {\r\n      const listIndex = state.cart.findIndex((v) => v.id === action.id);\r\n      const itemIndex = state.products.findIndex((v) => v.id === action.id);\r\n      if (listIndex !== -1) {\r\n        const cart = [...state.cart];\r\n        const products = [...state.products];\r\n        const item = products[itemIndex];\r\n        const cartItem = cart[listIndex];\r\n        cart[listIndex].quantity = cartItem.quantity + item.quantity;\r\n        const productsList = [\r\n          ...state.products.filter((v) => v.id !== action.id),\r\n          { ...item, quantity: 1 },\r\n        ].sort((a, b) => {\r\n          return a.id < b.id ? -1 : a.id > b.id ? 1 : 0;\r\n        });\r\n        console.log(cart);\r\n        return {\r\n          ...state,\r\n          products: productsList,\r\n          cart: cart,\r\n        };\r\n      } else {\r\n        const products = [...state.products];\r\n        const item = products[itemIndex];\r\n        const productsList = [\r\n          ...state.products.filter((v) => v.id !== action.id),\r\n          { ...item, quantity: 1 },\r\n        ].sort((a, b) => {\r\n          return a.id < b.id ? -1 : a.id > b.id ? 1 : 0;\r\n        });\r\n        return {\r\n          ...state,\r\n          products: productsList,\r\n          cart: [...state.cart, item],\r\n        };\r\n      }\r\n    }\r\n\r\n    default: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n"]},"metadata":{},"sourceType":"module"}