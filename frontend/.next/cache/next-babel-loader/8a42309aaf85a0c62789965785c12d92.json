{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport producer from \"immer\";\nvar initialState = {\n  cart: [],\n  isLoadingCart: false,\n  isRemoveingCart: false,\n  ShopId: undefined,\n  TableId: undefined\n};\nexport var LOAD_CART_REQUEST = \"LOAD_CART_REQUEST\";\nexport var LOAD_CART_SUCCESS = \"LOAD_CART_SUCCESS\";\nexport var LOAD_CART_FAILURE = \"LOAD_CART_FAILURE\";\nexport var REMOVE_ITEM_REQUEST = \"REMOVE_ITEM_REQUEST\";\nexport var REMOVE_ITEM_SUCCESS = \"REMOVE_ITEM_SUCCESS\";\nexport var REMOVE_ITEM_FAILURE = \"REMOVE_ITEM_FAILURE\";\nexport var ADD_ITEM_QUANTITY_REQUEST = \"ADD_ITEM_QUANTITY_REQUEST\";\nexport var SUBSTRACT_ITEM_QUANTITY_REQUEST = \"SUBSTRACT_ITEM_QUANTITY_REQUEST\";\nexport var ADD_CART_ITEM_REQUEST = \"ADD_CART_ITEM_REQUEST\";\nexport var REMOVE_CART_ITEM_REQUEST = \"REMOVE_CART_ITEM_REQUEST\";\nexport var CLEAR_CART_REQUEST = \"CLEAR_CART_REQUEST\";\nexport var GET_SHOP_TABLE_ID = \"GET_SHOP_TABLE_ID\";\nexport var SOLD_CART_SUCCESS = \"SOLD_CART_SUCCESS\";\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return producer(state, function (draft) {\n    switch (action.type) {\n      case LOAD_CART_REQUEST:\n        break;\n\n      case LOAD_CART_SUCCESS:\n        draft.cart = [action.data];\n        break;\n\n      case LOAD_CART_FAILURE:\n        break;\n\n      case REMOVE_ITEM_REQUEST:\n        var items = draft.cart.filter(function (item) {\n          return item.id !== action.id;\n        });\n        draft.cart = items;\n        break;\n\n      case ADD_CART_ITEM_REQUEST:\n        {\n          var product = draft.cart.find(function (v) {\n            return v.id === action.product.id;\n          });\n\n          if (product) {\n            product.quantity = product.quantity + action.product.quantity;\n            break;\n          }\n\n          draft.cart.push(action.product);\n        }\n        break;\n\n      case ADD_ITEM_QUANTITY_REQUEST:\n        {\n          var _product = draft.cart.find(function (stock) {\n            return stock.id === action.data.id;\n          });\n\n          console.log(_product.quantity);\n          console.log(_product.stock);\n          var quantity = _product.quantity;\n          var stock = _product.stock;\n          quantity = quantity < stock ? quantity += 1 : _product.quantity;\n          _product.quantity = quantity;\n        }\n        break;\n\n      case SUBSTRACT_ITEM_QUANTITY_REQUEST:\n        {\n          var _product2 = draft.cart.find(function (stock) {\n            return stock.id === action.data.id;\n          });\n\n          var _quantity = _product2.quantity;\n          _quantity = _quantity > 1 ? _quantity -= 1 : 1;\n          _product2.quantity = _quantity;\n        }\n        break;\n\n      case CLEAR_CART_REQUEST:\n        draft.cart = [];\n        break;\n\n      case GET_SHOP_TABLE_ID:\n        draft.ShopId = action.data.ShopId;\n        draft.TableId = action.data.TableId;\n        break;\n\n      case SOLD_CART_SUCCESS:\n        {\n          var cart = state.cart;\n          var products = action.data;\n          var result = cart.map(function (item) {\n            var product = products.find(function (v) {\n              return v.id === item.id;\n            });\n            var quantity = item.quantity - product.quantity;\n            return _objectSpread(_objectSpread({}, item), {}, {\n              quantity: quantity\n            });\n          });\n          draft.cart = [state.cart].concat(_toConsumableArray(result));\n        }\n        break;\n\n      default:\n        state;\n        break;\n    }\n  });\n});","map":{"version":3,"sources":["C:/Users/hoyuen/Documents/Dev/project1/frontend/reducers/cart.js"],"names":["producer","initialState","cart","isLoadingCart","isRemoveingCart","ShopId","undefined","TableId","LOAD_CART_REQUEST","LOAD_CART_SUCCESS","LOAD_CART_FAILURE","REMOVE_ITEM_REQUEST","REMOVE_ITEM_SUCCESS","REMOVE_ITEM_FAILURE","ADD_ITEM_QUANTITY_REQUEST","SUBSTRACT_ITEM_QUANTITY_REQUEST","ADD_CART_ITEM_REQUEST","REMOVE_CART_ITEM_REQUEST","CLEAR_CART_REQUEST","GET_SHOP_TABLE_ID","SOLD_CART_SUCCESS","state","action","draft","type","data","items","filter","item","id","product","find","v","quantity","push","stock","console","log","products","result","map"],"mappings":"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","sourcesContent":["import producer from \"immer\";\n\nconst initialState = {\n  cart: [],\n  isLoadingCart: false,\n  isRemoveingCart: false,\n  ShopId: undefined,\n  TableId: undefined,\n};\n\nexport const LOAD_CART_REQUEST = \"LOAD_CART_REQUEST\";\nexport const LOAD_CART_SUCCESS = \"LOAD_CART_SUCCESS\";\nexport const LOAD_CART_FAILURE = \"LOAD_CART_FAILURE\";\n\nexport const REMOVE_ITEM_REQUEST = \"REMOVE_ITEM_REQUEST\";\nexport const REMOVE_ITEM_SUCCESS = \"REMOVE_ITEM_SUCCESS\";\nexport const REMOVE_ITEM_FAILURE = \"REMOVE_ITEM_FAILURE\";\n\nexport const ADD_ITEM_QUANTITY_REQUEST = \"ADD_ITEM_QUANTITY_REQUEST\";\nexport const SUBSTRACT_ITEM_QUANTITY_REQUEST = \"SUBSTRACT_ITEM_QUANTITY_REQUEST\";\n\nexport const ADD_CART_ITEM_REQUEST = \"ADD_CART_ITEM_REQUEST\";\nexport const REMOVE_CART_ITEM_REQUEST = \"REMOVE_CART_ITEM_REQUEST\";\n\nexport const CLEAR_CART_REQUEST = \"CLEAR_CART_REQUEST\";\n\nexport const GET_SHOP_TABLE_ID = \"GET_SHOP_TABLE_ID\";\n\nexport const SOLD_CART_SUCCESS = \"SOLD_CART_SUCCESS\";\n\nexport default (state = initialState, action) => {\n  return producer(state, (draft) => {\n    switch (action.type) {\n      case LOAD_CART_REQUEST:\n        break;\n      case LOAD_CART_SUCCESS:\n        draft.cart = [action.data];\n        break;\n      case LOAD_CART_FAILURE:\n        break;\n\n      case REMOVE_ITEM_REQUEST:\n        const items = draft.cart.filter((item) => item.id !== action.id);\n        draft.cart = items;\n        break;\n      case ADD_CART_ITEM_REQUEST:\n        {\n          const product = draft.cart.find((v) => v.id === action.product.id);\n          if (product) {\n            product.quantity = product.quantity + action.product.quantity;\n            break;\n          }\n          draft.cart.push(action.product);\n        }\n        break;\n      case ADD_ITEM_QUANTITY_REQUEST:\n        {\n          const product = draft.cart.find((stock) => stock.id === action.data.id);\n          console.log(product.quantity);\n          console.log(product.stock);\n          let quantity = product.quantity;\n          const stock = product.stock;\n          quantity = quantity < stock ? (quantity += 1) : product.quantity;\n          product.quantity = quantity;\n        }\n        break;\n      case SUBSTRACT_ITEM_QUANTITY_REQUEST:\n        {\n          const product = draft.cart.find((stock) => stock.id === action.data.id);\n          let quantity = product.quantity;\n          quantity = quantity > 1 ? (quantity -= 1) : 1;\n          product.quantity = quantity;\n        }\n        break;\n      case CLEAR_CART_REQUEST:\n        draft.cart = [];\n        break;\n      case GET_SHOP_TABLE_ID:\n        draft.ShopId = action.data.ShopId;\n        draft.TableId = action.data.TableId;\n        break;\n      case SOLD_CART_SUCCESS:\n        {\n          const cart = state.cart;\n          const products = action.data;\n          const result = cart.map((item) => {\n            const product = products.find((v) => v.id === item.id);\n            const quantity = item.quantity - product.quantity;\n            return { ...item, quantity };\n          });\n          draft.cart = [state.cart, ...result];\n        }\n        break;\n      default:\n        state;\n        break;\n    }\n  });\n};\n"]},"metadata":{},"sourceType":"module"}