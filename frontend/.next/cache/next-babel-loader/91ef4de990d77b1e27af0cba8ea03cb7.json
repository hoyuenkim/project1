{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport \"@ant-design/icons\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport { Empty, Card, Space, List, Button, Avatar, Modal, Popconfirm, Col, Row, Typography } from \"antd\";\nimport { ADMIN_PRODUCTS_REQUEST, DELETE_CATEGORY_REQUEST } from \"../../../../reducers/shop\";\nimport CategoryForm from \"../../../../components/Forms/CategoryForm\";\nimport { PAGE_CHANGE_SUCCESS } from \"../../../../reducers/admin\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Index = function Index() {\n  _s();\n\n  var router = useRouter();\n  var query = router.query;\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      session = _useSelector.session;\n\n  var Shops = session.Shops;\n  var ShopInfo = Shops.filter(function (shop) {\n    console.log(shop.id == query.ShopId);\n    return shop.id == query.ShopId;\n  });\n  var dispatch = useDispatch();\n  console.log(session);\n\n  if (!session || session.division === false) {\n    return router.back();\n  } else {\n    useEffect(function () {\n      dispatch({\n        type: ADMIN_PRODUCTS_REQUEST,\n        ShopId: session.Shops[0].id\n      });\n    }, []);\n  }\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.shop;\n  }),\n      products = _useSelector2.products,\n      categories = _useSelector2.categories;\n\n  if (session.division === false || session === undefined) {\n    router.back();\n  }\n\n  var _useState = useState(false),\n      category = _useState[0],\n      setCategory = _useState[1];\n\n  var _useState2 = useState(),\n      item = _useState2[0],\n      setItem = _useState2[1];\n\n  var onToggleCategory = function onToggleCategory(item) {\n    setItem(item);\n    setCategory(function (prev) {\n      return !prev;\n    });\n  };\n\n  var onClickDelete = function onClickDelete(item) {\n    dispatch({\n      type: DELETE_CATEGORY_REQUEST,\n      data: {\n        id: item.id\n      }\n    });\n  };\n\n  useEffect(function () {\n    dispatch({\n      type: PAGE_CHANGE_SUCCESS,\n      data: \"admin\"\n    });\n  }, []);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(Card, {\n      title: /*#__PURE__*/_jsx(Typography.Title, {}),\n      children: /*#__PURE__*/_jsxs(Row, {\n        gutter: [10, 10],\n        children: [/*#__PURE__*/_jsx(Col, {\n          span: 24,\n          children: /*#__PURE__*/_jsx(Card, {\n            title: /*#__PURE__*/_jsx(Typography.Title, {\n              level: 3,\n              children: \"\\uC0C1\\uD488\\uAD00\\uB9AC\"\n            }),\n            onClick: function onClick() {\n              return router.push(\"/shop/admin/\".concat(query.ShopId, \"/product\"));\n            },\n            children: /*#__PURE__*/_jsxs(_Fragment, {\n              children: [category && /*#__PURE__*/_jsx(Modal, {\n                title: \"카테고리\",\n                visible: category,\n                onCancel: function onCancel() {\n                  setCategory(false);\n                },\n                footer: null,\n                children: /*#__PURE__*/_jsx(CategoryForm, {\n                  item: item,\n                  ShopId: session.Shops[0].id,\n                  setCategory: setCategory,\n                  setItem: setItem\n                })\n              }), /*#__PURE__*/_jsxs(Space, {\n                direction: \"vertical\",\n                style: {\n                  width: \"100%\"\n                },\n                children: [/*#__PURE__*/_jsx(Card, {\n                  title: \"카테고리 관리\",\n                  extra: categories && categories.length < 5 ? /*#__PURE__*/_jsx(Button, {\n                    onClick: function onClick() {\n                      return onToggleCategory();\n                    },\n                    children: \"\\uCE74\\uD14C\\uACE0\\uB9AC \\uCD94\\uAC00\"\n                  }) : /*#__PURE__*/_jsx(\"div\", {\n                    children: \"\\uCE74\\uD14C\\uACE0\\uB9AC\\uB294 \\uCD5C\\uB300 5\\uAC1C\\uAE4C\\uC9C0 \\uC124\\uC815\\uD558\\uC2E4 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"\n                  }),\n                  children: categories.length > 0 ? /*#__PURE__*/_jsx(List, {\n                    dataSource: categories,\n                    renderItem: function renderItem(item, i) {\n                      return /*#__PURE__*/_jsx(_Fragment, {\n                        children: /*#__PURE__*/_jsx(List.Item, {\n                          actions: [/*#__PURE__*/_jsx(\"div\", {\n                            onClick: function onClick() {\n                              return onToggleCategory(item);\n                            },\n                            children: \"\\uC218\\uC815\"\n                          }), /*#__PURE__*/_jsx(Popconfirm, {\n                            title: /*#__PURE__*/_jsxs(_Fragment, {\n                              children: [item.name, \"\\uC744 \\uC815\\uB9D0\\uB85C \\uC0AD\\uC81C\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\", /*#__PURE__*/_jsx(\"br\", {}), \"\\uCE74\\uD14C\\uACE0\\uB9AC\\uC5D0 \\uD574\\uB2F9\\uD558\\uB294 \\uBAA8\\uB4E0 \\uC0C1\\uD488\\uC774 \\uC0AD\\uC81C\\uB429\\uB2C8\\uB2E4.\"]\n                            }),\n                            onConfirm: function onConfirm() {\n                              return dispatch({\n                                type: DELETE_CATEGORY_REQUEST,\n                                data: {\n                                  id: item.id\n                                }\n                              });\n                            },\n                            onCancel: function onCancel() {\n                              return console.log(\"cancel\");\n                            },\n                            okText: \"Yes\",\n                            cancelText: \"No\",\n                            children: /*#__PURE__*/_jsx(\"div\", {\n                              children: \"\\uC0AD\\uC81C\"\n                            })\n                          })],\n                          children: /*#__PURE__*/_jsx(List.Item.Meta, {\n                            avatar: /*#__PURE__*/_jsx(Avatar, {\n                              children: i + 1\n                            }),\n                            title: item.name\n                          })\n                        }, i)\n                      });\n                    }\n                  }) : /*#__PURE__*/_jsx(Empty, {\n                    children: \"\\uCE74\\uD14C\\uACE0\\uB9AC\\uB97C \\uCD94\\uAC00\\uD574\\uC8FC\\uC138\\uC694.\"\n                  })\n                }), products.length > 0 && /*#__PURE__*/_jsx(Card, {\n                  title: \"상품정보\",\n                  extra: /*#__PURE__*/_jsx(Button, {\n                    onClick: function onClick() {\n                      return router.push(\"/shop/admin/product\");\n                    },\n                    children: \"\\uC0C1\\uD488\\uAD00\\uB9AC\"\n                  }),\n                  children: /*#__PURE__*/_jsx(Card.Meta, {\n                    title: /*#__PURE__*/_jsx(Avatar.Group, {\n                      maxCount: 10,\n                      children: products.map(function (product, i) {\n                        return /*#__PURE__*/_jsx(Avatar, {\n                          src: \"\".concat(process.env.BACKEND_IP, \"/uploads/\").concat(product.Images[0].url)\n                        }, i);\n                      })\n                    }),\n                    description: products.length > 1 ? \"\".concat(products[0].title, \" \\uC678 \").concat(products.length - 1, \"\\uAC1C\\uC758 \\uC0C1\\uD488\\uC774 \\uC874\\uC7AC\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4.\") : \"\".concat(products[0].title, \" \\uC0C1\\uD488\\uC774 \\uC874\\uC7AC\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4.\")\n                  })\n                }), categories.length > 0 && products.length < 1 && /*#__PURE__*/_jsx(Card, {\n                  title: \"상품정보\",\n                  children: /*#__PURE__*/_jsx(Empty, {\n                    onClick: function onClick() {\n                      return router.push(\"/shop/admin/product/add\");\n                    },\n                    children: \"\\uC0C1\\uD488\\uC744 \\uCD94\\uAC00\\uD574\\uC8FC\\uC138\\uC694\"\n                  })\n                })]\n              })]\n            })\n          })\n        }), /*#__PURE__*/_jsx(Col, {\n          span: 24,\n          children: /*#__PURE__*/_jsx(Card, {\n            title: /*#__PURE__*/_jsx(Typography.Title, {\n              level: 3,\n              children: \"\\uB9E4\\uCD9C\\uAD00\\uB9AC\"\n            }),\n            onClick: function onClick() {\n              return router.push(\"/shop/admin/history\");\n            }\n          })\n        })]\n      })\n    })\n  });\n};\n\n_s(Index, \"67yNpkIw+eCRDlHdrb6ZA11N0A8=\", false, function () {\n  return [useRouter, useSelector, useDispatch, useSelector];\n});\n\n_c = Index;\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["C:/Users/hoyuen/Documents/dev/project1/frontend/pages/shop/admin/[ShopId]/index.js"],"names":["useState","useEffect","useSelector","useDispatch","useRouter","Empty","Card","Space","List","Button","Avatar","Modal","Popconfirm","Col","Row","Typography","ADMIN_PRODUCTS_REQUEST","DELETE_CATEGORY_REQUEST","CategoryForm","PAGE_CHANGE_SUCCESS","Index","router","query","state","user","session","Shops","ShopInfo","filter","shop","console","log","id","ShopId","dispatch","division","back","type","products","categories","undefined","category","setCategory","item","setItem","onToggleCategory","prev","onClickDelete","data","push","width","length","i","name","map","product","process","env","BACKEND_IP","Images","url","title"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport {} from \"@ant-design/icons\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useRouter } from \"next/router\";\r\n\r\nimport {\r\n  Empty,\r\n  Card,\r\n  Space,\r\n  List,\r\n  Button,\r\n  Avatar,\r\n  Modal,\r\n  Popconfirm,\r\n  Col,\r\n  Row,\r\n  Typography,\r\n} from \"antd\";\r\nimport { ADMIN_PRODUCTS_REQUEST, DELETE_CATEGORY_REQUEST } from \"../../../../reducers/shop\";\r\n\r\nimport CategoryForm from \"../../../../components/Forms/CategoryForm\";\r\n\r\nimport { PAGE_CHANGE_SUCCESS } from \"../../../../reducers/admin\";\r\n\r\nconst Index = () => {\r\n  const router = useRouter();\r\n  const { query } = router;\r\n  const { session } = useSelector((state) => state.user);\r\n  const { Shops } = session;\r\n  const ShopInfo = Shops.filter((shop) => {\r\n    console.log(shop.id == query.ShopId);\r\n    return shop.id == query.ShopId;\r\n  });\r\n  const dispatch = useDispatch();\r\n\r\n  console.log(session);\r\n\r\n  if (!session || session.division === false) {\r\n    return router.back();\r\n  } else {\r\n    useEffect(() => {\r\n      dispatch({ type: ADMIN_PRODUCTS_REQUEST, ShopId: session.Shops[0].id });\r\n    }, []);\r\n  }\r\n\r\n  const { products, categories } = useSelector((state) => state.shop);\r\n\r\n  if (session.division === false || session === undefined) {\r\n    router.back();\r\n  }\r\n\r\n  const [category, setCategory] = useState(false);\r\n  const [item, setItem] = useState();\r\n\r\n  const onToggleCategory = (item) => {\r\n    setItem(item);\r\n    setCategory((prev) => !prev);\r\n  };\r\n\r\n  const onClickDelete = (item) => {\r\n    dispatch({ type: DELETE_CATEGORY_REQUEST, data: { id: item.id } });\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: PAGE_CHANGE_SUCCESS, data: \"admin\" });\r\n  }, []);\r\n  return (\r\n    <>\r\n      <Card title={<Typography.Title></Typography.Title>}>\r\n        <Row gutter={[10, 10]}>\r\n          <Col span={24}>\r\n            <Card\r\n              title={<Typography.Title level={3}>상품관리</Typography.Title>}\r\n              onClick={() => router.push(`/shop/admin/${query.ShopId}/product`)}\r\n            >\r\n              <>\r\n                {category && (\r\n                  <Modal\r\n                    title={\"카테고리\"}\r\n                    visible={category}\r\n                    onCancel={() => {\r\n                      setCategory(false);\r\n                    }}\r\n                    footer={null}\r\n                  >\r\n                    <CategoryForm\r\n                      item={item}\r\n                      ShopId={session.Shops[0].id}\r\n                      setCategory={setCategory}\r\n                      setItem={setItem}\r\n                    />\r\n                  </Modal>\r\n                )}\r\n                <Space direction={\"vertical\"} style={{ width: \"100%\" }}>\r\n                  <Card\r\n                    title={\"카테고리 관리\"}\r\n                    extra={\r\n                      categories && categories.length < 5 ? (\r\n                        <Button onClick={() => onToggleCategory()}>카테고리 추가</Button>\r\n                      ) : (\r\n                        <div>카테고리는 최대 5개까지 설정하실 수 있습니다.</div>\r\n                      )\r\n                    }\r\n                  >\r\n                    {categories.length > 0 ? (\r\n                      <List\r\n                        dataSource={categories}\r\n                        renderItem={(item, i) => (\r\n                          <>\r\n                            <List.Item\r\n                              key={i}\r\n                              actions={[\r\n                                <div onClick={() => onToggleCategory(item)}>수정</div>,\r\n                                <Popconfirm\r\n                                  title={\r\n                                    <>\r\n                                      {item.name}을 정말로 삭제하시겠습니까?\r\n                                      <br />\r\n                                      카테고리에 해당하는 모든 상품이 삭제됩니다.\r\n                                    </>\r\n                                  }\r\n                                  onConfirm={() =>\r\n                                    dispatch({\r\n                                      type: DELETE_CATEGORY_REQUEST,\r\n                                      data: { id: item.id },\r\n                                    })\r\n                                  }\r\n                                  onCancel={() => console.log(\"cancel\")}\r\n                                  okText=\"Yes\"\r\n                                  cancelText=\"No\"\r\n                                >\r\n                                  <div>삭제</div>\r\n                                </Popconfirm>,\r\n                              ]}\r\n                            >\r\n                              <List.Item.Meta avatar={<Avatar>{i + 1}</Avatar>} title={item.name} />\r\n                            </List.Item>\r\n                          </>\r\n                        )}\r\n                      />\r\n                    ) : (\r\n                      <Empty>카테고리를 추가해주세요.</Empty>\r\n                    )}\r\n                  </Card>\r\n                  {products.length > 0 && (\r\n                    <Card\r\n                      title={\"상품정보\"}\r\n                      extra={\r\n                        <Button onClick={() => router.push(\"/shop/admin/product\")}>상품관리</Button>\r\n                      }\r\n                    >\r\n                      <Card.Meta\r\n                        title={\r\n                          <Avatar.Group maxCount={10}>\r\n                            {products.map((product, i) => (\r\n                              <Avatar\r\n                                key={i}\r\n                                src={`${process.env.BACKEND_IP}/uploads/${product.Images[0].url}`}\r\n                              />\r\n                            ))}\r\n                          </Avatar.Group>\r\n                        }\r\n                        description={\r\n                          products.length > 1\r\n                            ? `${products[0].title} 외 ${\r\n                                products.length - 1\r\n                              }개의 상품이 존재하고 있습니다.`\r\n                            : `${products[0].title} 상품이 존재하고 있습니다.`\r\n                        }\r\n                      />\r\n                    </Card>\r\n                  )}\r\n                  {categories.length > 0 && products.length < 1 && (\r\n                    <Card title={\"상품정보\"}>\r\n                      <Empty onClick={() => router.push(\"/shop/admin/product/add\")}>\r\n                        상품을 추가해주세요\r\n                      </Empty>\r\n                    </Card>\r\n                  )}\r\n                </Space>\r\n              </>\r\n            </Card>\r\n          </Col>\r\n          <Col span={24}>\r\n            <Card\r\n              title={<Typography.Title level={3}>매출관리</Typography.Title>}\r\n              onClick={() => router.push(`/shop/admin/history`)}\r\n            ></Card>\r\n          </Col>\r\n        </Row>\r\n      </Card>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Index;\r\n"]},"metadata":{},"sourceType":"module"}