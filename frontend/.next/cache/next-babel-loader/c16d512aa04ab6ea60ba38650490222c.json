{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Card, Col, Space, Row, Divider, message, Typography, Modal, Tag } from 'antd';\nimport NumberFormat from 'react-number-format';\nimport AmountToggle from './Generalui/AmountToggle';\nimport { useDispatch } from 'react-redux';\nimport { ADD_CART_ITEM_REQUEST, CLEAR_CART_REQUEST } from '../reducers/cart';\nimport { INITIATE_QUANTITY_REQUEST } from '../reducers/menu';\nimport { useSelector } from 'react-redux';\nimport axios from 'axios';\nimport { PAYMENT_FAILURE, PAYMENT_SUCCESS } from '../reducers/payment';\nimport { useState } from 'react';\nimport OneSignal from 'react-onesignal';\nimport { onClickPayment } from './Generalui/Payment';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nconst ProductCard = ({\n  product\n}) => {\n  const {\n    0: toggleModal,\n    1: setToggleModal\n  } = useState(false);\n\n  const onChangeToggleModal = () => setToggleModal(prev => !prev);\n\n  const dispatch = useDispatch();\n  const {\n    isLoggedIn,\n    session\n  } = useSelector(state => state.user);\n  onClickPayment('single', product, setToggleModal);\n\n  const onClickAddCart = () => {\n    const discountedProduct = _objectSpread(_objectSpread({}, product), {}, {\n      price: product.discount ? product.price * (1 - product.discount) : product.price,\n      amount: product.discount ? product.price * (1 - product.discount) * product.quantity : product.price * product.quantity\n    });\n\n    dispatch({\n      type: ADD_CART_ITEM_REQUEST,\n      product: discountedProduct\n    });\n    dispatch({\n      type: INITIATE_QUANTITY_REQUEST,\n      data: product\n    });\n  }; // const onClickPayment = () => {\n  //   if (isLoggedIn) {\n  //     dispatch({ type: CLEAR_CART_REQUEST });\n  //     const originData = {\n  //       UserId: session.id,\n  //       UserName: session.name,\n  //       ProductId: product.id,\n  //       ShopId: product.Shop.id,\n  //       price: product.discount\n  //         ? product.price * (100 - product.discount) * 0.01 * product.quantity\n  //         : product.price * product.quantity,\n  //       quantity: product.quantity,\n  //       ShopName: product.Shop.name,\n  //       ProductTitle: product.title,\n  //     };\n  //     const custom_data = JSON.stringify([originData]);\n  //     onWindowScroll();\n  //     if (IMP !== null) {\n  //       IMP.init(process.env.IAMPORT_KEY);\n  //       const today = Date.now();\n  //       IMP.request_pay(\n  //         {\n  //           pay_method: 'card',\n  //           name: product.title,\n  //           Merchant_uid: 'uid' + today,\n  //           amount: product.Discount\n  //             ? product.price *\n  //               (100 - product.Discount.rate) *\n  //               0.01 *\n  //               product.quantity\n  //             : product.price * product.quantity,\n  //           custom_data,\n  //         },\n  //         callback\n  //       );\n  //     }\n  //   } else {\n  //     onChangeToggleModal();\n  //   }\n  // };\n  // const [initialized, setInitialized] = useState(false);\n  // OneSignal.init({\n  //   appId: 'e403941a-d352-4195-a086-502cb595a147',\n  //   notifyButton: {\n  //     enable: true,\n  //   },\n  //   allowLocalhostAsSecureOrigin: true,\n  // }).then(() => {\n  //   setInitialized(true);\n  //   OneSignal.getUserId().then((useId) => {\n  //     console.log('useId: ', useId);\n  //   });\n  //   OneSignal.setExternalUserId(session.id);\n  //   return () => {\n  //     window.OneSignal = undefined;\n  //   };\n  // });\n  // const callback = async (response) => {\n  //   const { success, error_msg } = response;\n  //   if (success) {\n  //     axios\n  //       .post(`${process.env.BACKEND_IP}/payments/complete`, { data: response })\n  //       .then((response) => {\n  //         dispatch({ type: PAYMENT_SUCCESS }, { data: response });\n  //       })\n  //       .catch((e) => {\n  //         console.log(e);\n  //         dispatch({ type: PAYMENT_FAILURE }, { error: e });\n  //       });\n  //   } else {\n  //     alert(`결제 실패: ${error_msg}`);\n  //   }\n  // };\n\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Modal, {\n      header: null,\n      visible: toggleModal,\n      onCancel: onChangeToggleModal,\n      footer: null,\n      children: \"\\uB85C\\uADF8\\uC778\\uC744 \\uD558\\uC154\\uC57C\\uD569\\uB2C8\\uB2E4.\"\n    }), /*#__PURE__*/_jsx(Card, {\n      title: /*#__PURE__*/_jsx(_Fragment, {\n        children: product.Discount ? /*#__PURE__*/_jsxs(Space, {\n          children: [/*#__PURE__*/_jsx(Typography.Title, {\n            level: 3,\n            children: product.title\n          }), ' ', /*#__PURE__*/_jsxs(Tag, {\n            color: 'magenta',\n            children: [\"-\", product.Discount.rate, \"%\"]\n          })]\n        }) : /*#__PURE__*/_jsx(\"h1\", {\n          children: product.title\n        })\n      }),\n      actions: [/*#__PURE__*/_jsx(\"div\", {\n        onClick: onClickPayment,\n        children: \"\\uC989\\uC2DC \\uAD6C\\uB9E4\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        onClick: onClickAddCart,\n        children: \"\\uC7A5\\uBC14\\uAD6C\\uB2C8\"\n      })],\n      cover: /*#__PURE__*/_jsx(\"img\", {\n        style: {\n          border: `1px solid #EFF2F5`\n        },\n        src: product.Images[0] && `${process.env.BACKEND_IP}/uploads/${product.Images[0].url}`\n      }),\n      hoverable: true,\n      children: /*#__PURE__*/_jsx(Card.Meta, {\n        description: /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(Row, {\n            gutter: [16, 16],\n            align: 'middle',\n            justify: 'end',\n            children: [/*#__PURE__*/_jsxs(Col, {\n              md: 16,\n              xs: 16,\n              style: {\n                display: 'inline-block'\n              },\n              children: [product.Discount ? /*#__PURE__*/_jsxs(_Fragment, {\n                children: [/*#__PURE__*/_jsx(\"h5\", {\n                  children: \"\\uAC00\\uACA9\"\n                }), /*#__PURE__*/_jsxs(Space, {\n                  align: \"center\",\n                  children: [/*#__PURE__*/_jsxs(\"h1\", {\n                    style: {\n                      color: '#FF5733',\n                      fontWeight: 'bold'\n                    },\n                    children: [/*#__PURE__*/_jsx(NumberFormat, {\n                      value: product.price * (100 - product.Discount.rate) * 0.01,\n                      displayType: 'text',\n                      thousandSeparator: true\n                    }), \"\\uC6D0\"]\n                  }), /*#__PURE__*/_jsxs(Tag, {\n                    children: [/*#__PURE__*/_jsx(NumberFormat, {\n                      value: product.price,\n                      displayType: 'text',\n                      thousandSeparator: true\n                    }), \"\\uC6D0\"]\n                  }), '  ']\n                })]\n              }) : /*#__PURE__*/_jsxs(\"div\", {\n                children: [/*#__PURE__*/_jsx(\"h5\", {\n                  children: \"\\uAC00\\uACA9\"\n                }), /*#__PURE__*/_jsxs(\"h1\", {\n                  children: [/*#__PURE__*/_jsx(NumberFormat, {\n                    value: product.price,\n                    displayType: 'text',\n                    thousandSeparator: true\n                  }), \"\\uC6D0\"]\n                })]\n              }), ' ']\n            }), /*#__PURE__*/_jsx(Col, {\n              md: 8,\n              xs: 8,\n              children: /*#__PURE__*/_jsx(AmountToggle, {\n                id: product.id,\n                quantity: product.quantity\n              })\n            })]\n          }), /*#__PURE__*/_jsx(Divider, {}), /*#__PURE__*/_jsxs(Row, {\n            align: 'middle',\n            justify: 'center',\n            children: [/*#__PURE__*/_jsx(Col, {\n              span: 8,\n              xs: 8,\n              children: /*#__PURE__*/_jsx(\"div\", {\n                children: \"\\uCD1D \\uC8FC\\uBB38\\uAE08\\uC561\"\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              span: 16,\n              xs: 16,\n              children: /*#__PURE__*/_jsx(\"div\", {\n                style: {\n                  textAlign: 'right'\n                },\n                children: /*#__PURE__*/_jsxs(\"h1\", {\n                  children: [/*#__PURE__*/_jsx(NumberFormat, {\n                    value: product.Discount ? product.price * (100 - product.Discount.rate) * 0.01 * product.quantity : product.price * product.quantity,\n                    displayType: 'text',\n                    thousandSeparator: true\n                  }), \"\\uC6D0\"]\n                })\n              })\n            })]\n          })]\n        })\n      })\n    }, product.id)]\n  });\n};\n\nexport default ProductCard;","map":{"version":3,"sources":["C:/Users/hoyuen/Documents/dev/project1/frontend/components/ProductCard.js"],"names":["Card","Col","Space","Row","Divider","message","Typography","Modal","Tag","NumberFormat","AmountToggle","useDispatch","ADD_CART_ITEM_REQUEST","CLEAR_CART_REQUEST","INITIATE_QUANTITY_REQUEST","useSelector","axios","PAYMENT_FAILURE","PAYMENT_SUCCESS","useState","OneSignal","onClickPayment","ProductCard","product","toggleModal","setToggleModal","onChangeToggleModal","prev","dispatch","isLoggedIn","session","state","user","onClickAddCart","discountedProduct","price","discount","amount","quantity","type","data","Discount","title","rate","border","Images","process","env","BACKEND_IP","url","display","color","fontWeight","id","textAlign"],"mappings":"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","sourcesContent":["import {\r\n  Card,\r\n  Col,\r\n  Space,\r\n  Row,\r\n  Divider,\r\n  message,\r\n  Typography,\r\n  Modal,\r\n  Tag,\r\n} from 'antd';\r\nimport NumberFormat from 'react-number-format';\r\nimport AmountToggle from './Generalui/AmountToggle';\r\nimport { useDispatch } from 'react-redux';\r\nimport { ADD_CART_ITEM_REQUEST, CLEAR_CART_REQUEST } from '../reducers/cart';\r\nimport { INITIATE_QUANTITY_REQUEST } from '../reducers/menu';\r\nimport { useSelector } from 'react-redux';\r\nimport axios from 'axios';\r\nimport { PAYMENT_FAILURE, PAYMENT_SUCCESS } from '../reducers/payment';\r\nimport { useState } from 'react';\r\nimport OneSignal from 'react-onesignal';\r\nimport { onClickPayment } from './Generalui/Payment';\r\n\r\nconst ProductCard = ({ product }) => {\r\n  const [toggleModal, setToggleModal] = useState(false);\r\n  const onChangeToggleModal = () => setToggleModal((prev) => !prev);\r\n  const dispatch = useDispatch();\r\n\r\n  const { isLoggedIn, session } = useSelector((state) => state.user);\r\n\r\n  onClickPayment('single', product, setToggleModal);\r\n\r\n  const onClickAddCart = () => {\r\n    const discountedProduct = {\r\n      ...product,\r\n      price: product.discount\r\n        ? product.price * (1 - product.discount)\r\n        : product.price,\r\n      amount: product.discount\r\n        ? product.price * (1 - product.discount) * product.quantity\r\n        : product.price * product.quantity,\r\n    };\r\n    dispatch({\r\n      type: ADD_CART_ITEM_REQUEST,\r\n      product: discountedProduct,\r\n    });\r\n    dispatch({ type: INITIATE_QUANTITY_REQUEST, data: product });\r\n  };\r\n\r\n  // const onClickPayment = () => {\r\n  //   if (isLoggedIn) {\r\n  //     dispatch({ type: CLEAR_CART_REQUEST });\r\n\r\n  //     const originData = {\r\n  //       UserId: session.id,\r\n  //       UserName: session.name,\r\n  //       ProductId: product.id,\r\n  //       ShopId: product.Shop.id,\r\n  //       price: product.discount\r\n  //         ? product.price * (100 - product.discount) * 0.01 * product.quantity\r\n  //         : product.price * product.quantity,\r\n  //       quantity: product.quantity,\r\n  //       ShopName: product.Shop.name,\r\n  //       ProductTitle: product.title,\r\n  //     };\r\n\r\n  //     const custom_data = JSON.stringify([originData]);\r\n\r\n  //     onWindowScroll();\r\n  //     if (IMP !== null) {\r\n  //       IMP.init(process.env.IAMPORT_KEY);\r\n  //       const today = Date.now();\r\n  //       IMP.request_pay(\r\n  //         {\r\n  //           pay_method: 'card',\r\n  //           name: product.title,\r\n  //           Merchant_uid: 'uid' + today,\r\n  //           amount: product.Discount\r\n  //             ? product.price *\r\n  //               (100 - product.Discount.rate) *\r\n  //               0.01 *\r\n  //               product.quantity\r\n  //             : product.price * product.quantity,\r\n  //           custom_data,\r\n  //         },\r\n  //         callback\r\n  //       );\r\n  //     }\r\n  //   } else {\r\n  //     onChangeToggleModal();\r\n  //   }\r\n  // };\r\n\r\n  // const [initialized, setInitialized] = useState(false);\r\n  // OneSignal.init({\r\n  //   appId: 'e403941a-d352-4195-a086-502cb595a147',\r\n  //   notifyButton: {\r\n  //     enable: true,\r\n  //   },\r\n  //   allowLocalhostAsSecureOrigin: true,\r\n  // }).then(() => {\r\n  //   setInitialized(true);\r\n\r\n  //   OneSignal.getUserId().then((useId) => {\r\n  //     console.log('useId: ', useId);\r\n  //   });\r\n\r\n  //   OneSignal.setExternalUserId(session.id);\r\n\r\n  //   return () => {\r\n  //     window.OneSignal = undefined;\r\n  //   };\r\n  // });\r\n\r\n  // const callback = async (response) => {\r\n  //   const { success, error_msg } = response;\r\n  //   if (success) {\r\n  //     axios\r\n  //       .post(`${process.env.BACKEND_IP}/payments/complete`, { data: response })\r\n  //       .then((response) => {\r\n  //         dispatch({ type: PAYMENT_SUCCESS }, { data: response });\r\n  //       })\r\n  //       .catch((e) => {\r\n  //         console.log(e);\r\n  //         dispatch({ type: PAYMENT_FAILURE }, { error: e });\r\n  //       });\r\n  //   } else {\r\n  //     alert(`결제 실패: ${error_msg}`);\r\n  //   }\r\n  // };\r\n\r\n  return (\r\n    <>\r\n      <Modal\r\n        header={null}\r\n        visible={toggleModal}\r\n        onCancel={onChangeToggleModal}\r\n        footer={null}\r\n      >\r\n        로그인을 하셔야합니다.\r\n      </Modal>\r\n      <Card\r\n        key={product.id}\r\n        title={\r\n          <>\r\n            {product.Discount ? (\r\n              <Space>\r\n                <Typography.Title level={3}>{product.title}</Typography.Title>{' '}\r\n                <Tag color={'magenta'}>-{product.Discount.rate}%</Tag>\r\n              </Space>\r\n            ) : (\r\n              <h1>{product.title}</h1>\r\n            )}\r\n          </>\r\n        }\r\n        actions={[\r\n          <div onClick={onClickPayment}>즉시 구매</div>,\r\n          <div onClick={onClickAddCart}>장바구니</div>,\r\n        ]}\r\n        cover={\r\n          <img\r\n            style={{ border: `1px solid #EFF2F5` }}\r\n            src={\r\n              product.Images[0] &&\r\n              `${process.env.BACKEND_IP}/uploads/${product.Images[0].url}`\r\n            }\r\n          />\r\n        }\r\n        hoverable\r\n      >\r\n        <Card.Meta\r\n          description={\r\n            <>\r\n              <Row gutter={[16, 16]} align={'middle'} justify={'end'}>\r\n                <Col md={16} xs={16} style={{ display: 'inline-block' }}>\r\n                  {product.Discount ? (\r\n                    <>\r\n                      <h5>가격</h5>\r\n                      <Space align=\"center\">\r\n                        <h1 style={{ color: '#FF5733', fontWeight: 'bold' }}>\r\n                          <NumberFormat\r\n                            value={\r\n                              product.price *\r\n                              (100 - product.Discount.rate) *\r\n                              0.01\r\n                            }\r\n                            displayType={'text'}\r\n                            thousandSeparator={true}\r\n                          />\r\n                          원\r\n                        </h1>\r\n                        <Tag>\r\n                          <NumberFormat\r\n                            value={product.price}\r\n                            displayType={'text'}\r\n                            thousandSeparator={true}\r\n                          />\r\n                          원\r\n                        </Tag>\r\n                        {'  '}\r\n                      </Space>\r\n                    </>\r\n                  ) : (\r\n                    <div>\r\n                      <h5>가격</h5>\r\n                      <h1>\r\n                        <NumberFormat\r\n                          value={product.price}\r\n                          displayType={'text'}\r\n                          thousandSeparator={true}\r\n                        />\r\n                        원\r\n                      </h1>\r\n                    </div>\r\n                  )}{' '}\r\n                </Col>\r\n                <Col md={8} xs={8}>\r\n                  <AmountToggle id={product.id} quantity={product.quantity} />\r\n                </Col>\r\n              </Row>\r\n              <Divider />\r\n              <Row align={'middle'} justify={'center'}>\r\n                <Col span={8} xs={8}>\r\n                  <div>총 주문금액</div>\r\n                </Col>\r\n                <Col span={16} xs={16}>\r\n                  <div style={{ textAlign: 'right' }}>\r\n                    <h1>\r\n                      <NumberFormat\r\n                        value={\r\n                          product.Discount\r\n                            ? product.price *\r\n                              (100 - product.Discount.rate) *\r\n                              0.01 *\r\n                              product.quantity\r\n                            : product.price * product.quantity\r\n                        }\r\n                        displayType={'text'}\r\n                        thousandSeparator={true}\r\n                      />\r\n                      원\r\n                    </h1>\r\n                  </div>\r\n                </Col>\r\n              </Row>\r\n            </>\r\n          }\r\n        />\r\n      </Card>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductCard;\r\n"]},"metadata":{},"sourceType":"module"}