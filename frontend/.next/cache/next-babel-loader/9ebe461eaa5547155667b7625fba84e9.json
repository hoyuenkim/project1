{"ast":null,"code":"import { createStore, compose, applyMiddleware } from \"redux\";\nimport { createWrapper } from \"next-redux-wrapper\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport createSagaMiddleware from \"redux-saga\";\nimport rootSaga from \"../sagas\";\nimport rootReducer from \"../reducers\";\n\nvar _require = require(\"redux-persist\"),\n    persistStore = _require.persistStore;\n\nimport storage from \"redux-persist/lib/storage/session\";\n\nvar configureStore = function configureStore() {\n  var sagaMiddleware = createSagaMiddleware();\n  var middlewares = [sagaMiddleware];\n  var enhencer = false ? compose(applyMiddleware.apply(void 0, middlewares)) : composeWithDevTools(applyMiddleware.apply(void 0, middlewares));\n\n  var rootStore = function rootStore(reducer) {\n    return createStore(reducer, {}, enhencer);\n  };\n\n  var isServer = false;\n\n  if (isServer) {\n    var store = rootStore(rootReducer);\n    store.sagaTask = sagaMiddleware.run(rootSaga);\n    return store;\n  } else {\n    var _require2 = require(\"redux-persist\"),\n        persistReducer = _require2.persistReducer;\n\n    var persistConfig = {\n      key: \"nextjs\",\n      whitelist: [\"user\"],\n      storage: storage,\n      transforms: []\n    };\n    console.log(\"store: \".concat(_store));\n    var persistedReducer = persistReducer(persistConfig, rootReducer);\n\n    var _store = rootStore(persistedReducer);\n\n    _store.sagaTask = sagaMiddleware.run(rootSaga);\n    _store.__persistor = persistStore(_store);\n    return _store;\n  }\n};\n\nvar wrapper = createWrapper(configureStore, {\n  debug: true\n});\nexport default wrapper;","map":{"version":3,"sources":["C:/Users/hoyuen/Documents/dev/project1/frontend/store/configureStore.js"],"names":["createStore","compose","applyMiddleware","createWrapper","composeWithDevTools","createSagaMiddleware","rootSaga","rootReducer","require","persistStore","storage","configureStore","sagaMiddleware","middlewares","enhencer","rootStore","reducer","isServer","store","sagaTask","run","persistReducer","persistConfig","key","whitelist","transforms","console","log","persistedReducer","__persistor","wrapper","debug"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,OAAtB,EAA+BC,eAA/B,QAAsD,OAAtD;AACA,SAASC,aAAT,QAA8B,oBAA9B;AACA,SAASC,mBAAT,QAAoC,0BAApC;AACA,OAAOC,oBAAP,MAAiC,YAAjC;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAOC,WAAP,MAAwB,aAAxB;;AACA,eAAyBC,OAAO,CAAC,eAAD,CAAhC;AAAA,IAAQC,YAAR,YAAQA,YAAR;;AACA,OAAOC,OAAP,MAAoB,mCAApB;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B,MAAMC,cAAc,GAAGP,oBAAoB,EAA3C;AAEA,MAAMQ,WAAW,GAAG,CAACD,cAAD,CAApB;AACA,MAAME,QAAQ,GACZ,QACIb,OAAO,CAACC,eAAe,MAAf,SAAmBW,WAAnB,CAAD,CADX,GAEIT,mBAAmB,CAACF,eAAe,MAAf,SAAmBW,WAAnB,CAAD,CAHzB;;AAIA,MAAME,SAAS,GAAG,SAAZA,SAAY,CAACC,OAAD;AAAA,WAAahB,WAAW,CAACgB,OAAD,EAAU,EAAV,EAAcF,QAAd,CAAxB;AAAA,GAAlB;;AAEA,MAAMG,QAAQ,QAAd;;AACA,MAAIA,QAAJ,EAAc;AACZ,QAAMC,KAAK,GAAGH,SAAS,CAACR,WAAD,CAAvB;AACAW,IAAAA,KAAK,CAACC,QAAN,GAAiBP,cAAc,CAACQ,GAAf,CAAmBd,QAAnB,CAAjB;AACA,WAAOY,KAAP;AACD,GAJD,MAIO;AACL,oBAA2BV,OAAO,CAAC,eAAD,CAAlC;AAAA,QAAQa,cAAR,aAAQA,cAAR;;AAEA,QAAMC,aAAa,GAAG;AACpBC,MAAAA,GAAG,EAAE,QADe;AAEpBC,MAAAA,SAAS,EAAE,CAAC,MAAD,CAFS;AAGpBd,MAAAA,OAAO,EAAPA,OAHoB;AAIpBe,MAAAA,UAAU,EAAE;AAJQ,KAAtB;AAMAC,IAAAA,OAAO,CAACC,GAAR,kBAAsBT,MAAtB;AACA,QAAMU,gBAAgB,GAAGP,cAAc,CAACC,aAAD,EAAgBf,WAAhB,CAAvC;;AACA,QAAMW,MAAK,GAAGH,SAAS,CAACa,gBAAD,CAAvB;;AACAV,IAAAA,MAAK,CAACC,QAAN,GAAiBP,cAAc,CAACQ,GAAf,CAAmBd,QAAnB,CAAjB;AACAY,IAAAA,MAAK,CAACW,WAAN,GAAoBpB,YAAY,CAACS,MAAD,CAAhC;AACA,WAAOA,MAAP;AACD;AACF,CA/BD;;AAiCA,IAAMY,OAAO,GAAG3B,aAAa,CAACQ,cAAD,EAAiB;AAAEoB,EAAAA,KAAK;AAAP,CAAjB,CAA7B;AAEA,eAAeD,OAAf","sourcesContent":["import { createStore, compose, applyMiddleware } from \"redux\";\nimport { createWrapper } from \"next-redux-wrapper\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport createSagaMiddleware from \"redux-saga\";\nimport rootSaga from \"../sagas\";\nimport rootReducer from \"../reducers\";\nconst { persistStore } = require(\"redux-persist\");\nimport storage from \"redux-persist/lib/storage/session\";\n\nconst configureStore = () => {\n  const sagaMiddleware = createSagaMiddleware();\n\n  const middlewares = [sagaMiddleware];\n  const enhencer =\n    process.env.NODE_ENV === \"production\"\n      ? compose(applyMiddleware(...middlewares))\n      : composeWithDevTools(applyMiddleware(...middlewares));\n  const rootStore = (reducer) => createStore(reducer, {}, enhencer);\n\n  const isServer = typeof window === \"undefined\";\n  if (isServer) {\n    const store = rootStore(rootReducer);\n    store.sagaTask = sagaMiddleware.run(rootSaga);\n    return store;\n  } else {\n    const { persistReducer } = require(\"redux-persist\");\n\n    const persistConfig = {\n      key: \"nextjs\",\n      whitelist: [\"user\"],\n      storage,\n      transforms: [],\n    };\n    console.log(`store: ${store}`);\n    const persistedReducer = persistReducer(persistConfig, rootReducer);\n    const store = rootStore(persistedReducer);\n    store.sagaTask = sagaMiddleware.run(rootSaga);\n    store.__persistor = persistStore(store);\n    return store;\n  }\n};\n\nconst wrapper = createWrapper(configureStore, { debug: process.env.NODE_ENV !== \"production\" });\n\nexport default wrapper;\n"]},"metadata":{},"sourceType":"module"}