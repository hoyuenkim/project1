{"ast":null,"code":"import { createStore, compose, applyMiddleware } from 'redux';\nimport { createWrapper } from 'next-redux-wrapper';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport { createLogger } from 'redux-logger';\nimport createSagaMiddleware from 'redux-saga';\nimport rootSaga from '../sagas';\nimport rootReducer from '../reducers';\n\nvar _require = require('redux-persist'),\n    persistStore = _require.persistStore;\n\nimport expireIn from 'redux-persist-transform-expire-in';\n\nvar configureStore = function configureStore() {\n  var sagaMiddleware = createSagaMiddleware();\n  var logger = createLogger();\n  var middlewares = [logger, sagaMiddleware];\n  var enhencer = false ? compose(applyMiddleware.apply(void 0, middlewares)) : composeWithDevTools(applyMiddleware.apply(void 0, middlewares));\n\n  var rootStore = function rootStore(reducer) {\n    return createStore(reducer, {}, enhencer);\n  };\n\n  var isServer = false;\n\n  if (isServer) {\n    var store = rootStore(rootReducer);\n    store.sagaTask = sagaMiddleware.run(rootSaga);\n    console.log(\"store: \".concat(store));\n    return store;\n  } else {\n    var _require2 = require('redux-persist'),\n        persistReducer = _require2.persistReducer;\n\n    var storage = require('redux-persist/lib/storage')[\"default\"];\n\n    var expiredBy = 60 * 60 * 1000;\n    var expirationKey = 'expirationKey';\n    var persistConfig = {\n      key: 'nextjs',\n      whitelist: ['user'],\n      storage: storage,\n      transforms: [expireIn(expiredBy, expirationKey, {})]\n    };\n    console.log(\"store: \".concat(_store));\n    var persistedReducer = persistReducer(persistConfig, rootReducer);\n\n    var _store = rootStore(persistedReducer);\n\n    _store.sagaTask = sagaMiddleware.run(rootSaga);\n    _store.__persistor = persistStore(_store);\n    return _store;\n  }\n};\n\nvar wrapper = createWrapper(configureStore, {\n  debug: true\n});\nexport default wrapper;","map":{"version":3,"sources":["C:/Users/hoyuen/Documents/project/project1/frontend/store/configureStore.js"],"names":["createStore","compose","applyMiddleware","createWrapper","composeWithDevTools","createLogger","createSagaMiddleware","rootSaga","rootReducer","require","persistStore","expireIn","configureStore","sagaMiddleware","logger","middlewares","enhencer","rootStore","reducer","isServer","store","sagaTask","run","console","log","persistReducer","storage","expiredBy","expirationKey","persistConfig","key","whitelist","transforms","persistedReducer","__persistor","wrapper","debug"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,OAAtB,EAA+BC,eAA/B,QAAsD,OAAtD;AACA,SAASC,aAAT,QAA8B,oBAA9B;AACA,SAASC,mBAAT,QAAoC,0BAApC;AACA,SAASC,YAAT,QAA6B,cAA7B;AACA,OAAOC,oBAAP,MAAiC,YAAjC;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAOC,WAAP,MAAwB,aAAxB;;eACyBC,OAAO,CAAC,eAAD,C;IAAxBC,Y,YAAAA,Y;;AACR,OAAOC,QAAP,MAAqB,mCAArB;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B,MAAMC,cAAc,GAAGP,oBAAoB,EAA3C;AACA,MAAMQ,MAAM,GAAGT,YAAY,EAA3B;AACA,MAAMU,WAAW,GAAG,CAACD,MAAD,EAASD,cAAT,CAApB;AACA,MAAMG,QAAQ,GACZ,QACIf,OAAO,CAACC,eAAe,MAAf,SAAmBa,WAAnB,CAAD,CADX,GAEIX,mBAAmB,CAACF,eAAe,MAAf,SAAmBa,WAAnB,CAAD,CAHzB;;AAIA,MAAME,SAAS,GAAG,SAAZA,SAAY,CAACC,OAAD;AAAA,WAAalB,WAAW,CAACkB,OAAD,EAAU,EAAV,EAAcF,QAAd,CAAxB;AAAA,GAAlB;;AAEA,MAAMG,QAAQ,QAAd;;AACA,MAAIA,QAAJ,EAAc;AACZ,QAAMC,KAAK,GAAGH,SAAS,CAACT,WAAD,CAAvB;AACAY,IAAAA,KAAK,CAACC,QAAN,GAAiBR,cAAc,CAACS,GAAf,CAAmBf,QAAnB,CAAjB;AACAgB,IAAAA,OAAO,CAACC,GAAR,kBAAsBJ,KAAtB;AACA,WAAOA,KAAP;AACD,GALD,MAKO;AAAA,oBACsBX,OAAO,CAAC,eAAD,CAD7B;AAAA,QACGgB,cADH,aACGA,cADH;;AAEL,QAAMC,OAAO,GAAGjB,OAAO,CAAC,2BAAD,CAAP,WAAhB;;AAEA,QAAMkB,SAAS,GAAG,KAAK,EAAL,GAAU,IAA5B;AACA,QAAMC,aAAa,GAAG,eAAtB;AAEA,QAAMC,aAAa,GAAG;AACpBC,MAAAA,GAAG,EAAE,QADe;AAEpBC,MAAAA,SAAS,EAAE,CAAC,MAAD,CAFS;AAGpBL,MAAAA,OAAO,EAAPA,OAHoB;AAIpBM,MAAAA,UAAU,EAAE,CAACrB,QAAQ,CAACgB,SAAD,EAAYC,aAAZ,EAA2B,EAA3B,CAAT;AAJQ,KAAtB;AAMAL,IAAAA,OAAO,CAACC,GAAR,kBAAsBJ,MAAtB;AACA,QAAMa,gBAAgB,GAAGR,cAAc,CAACI,aAAD,EAAgBrB,WAAhB,CAAvC;;AACA,QAAMY,MAAK,GAAGH,SAAS,CAACgB,gBAAD,CAAvB;;AACAb,IAAAA,MAAK,CAACC,QAAN,GAAiBR,cAAc,CAACS,GAAf,CAAmBf,QAAnB,CAAjB;AACAa,IAAAA,MAAK,CAACc,WAAN,GAAoBxB,YAAY,CAACU,MAAD,CAAhC;AACA,WAAOA,MAAP;AACD;AACF,CApCD;;AAsCA,IAAMe,OAAO,GAAGhC,aAAa,CAACS,cAAD,EAAiB;AAAEwB,EAAAA,KAAK;AAAP,CAAjB,CAA7B;AAEA,eAAeD,OAAf","sourcesContent":["import { createStore, compose, applyMiddleware } from 'redux';\r\nimport { createWrapper } from 'next-redux-wrapper';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { createLogger } from 'redux-logger';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport rootSaga from '../sagas';\r\nimport rootReducer from '../reducers';\r\nconst { persistStore } = require('redux-persist');\r\nimport expireIn from 'redux-persist-transform-expire-in';\r\n\r\nconst configureStore = () => {\r\n  const sagaMiddleware = createSagaMiddleware();\r\n  const logger = createLogger();\r\n  const middlewares = [logger, sagaMiddleware];\r\n  const enhencer =\r\n    process.env.NODE_ENV === 'production'\r\n      ? compose(applyMiddleware(...middlewares))\r\n      : composeWithDevTools(applyMiddleware(...middlewares));\r\n  const rootStore = (reducer) => createStore(reducer, {}, enhencer);\r\n\r\n  const isServer = typeof window === 'undefined';\r\n  if (isServer) {\r\n    const store = rootStore(rootReducer);\r\n    store.sagaTask = sagaMiddleware.run(rootSaga);\r\n    console.log(`store: ${store}`);\r\n    return store;\r\n  } else {\r\n    const { persistReducer } = require('redux-persist');\r\n    const storage = require('redux-persist/lib/storage').default;\r\n\r\n    const expiredBy = 60 * 60 * 1000;\r\n    const expirationKey = 'expirationKey';\r\n\r\n    const persistConfig = {\r\n      key: 'nextjs',\r\n      whitelist: ['user'],\r\n      storage,\r\n      transforms: [expireIn(expiredBy, expirationKey, {})],\r\n    };\r\n    console.log(`store: ${store}`);\r\n    const persistedReducer = persistReducer(persistConfig, rootReducer);\r\n    const store = rootStore(persistedReducer);\r\n    store.sagaTask = sagaMiddleware.run(rootSaga);\r\n    store.__persistor = persistStore(store);\r\n    return store;\r\n  }\r\n};\r\n\r\nconst wrapper = createWrapper(configureStore, { debug: process.env.NODE_ENV !== 'production' });\r\n\r\nexport default wrapper;\r\n"]},"metadata":{},"sourceType":"module"}