{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Card, Col, Space, Row, Divider, message, Typography, Modal, Tag } from \"antd\";\nimport NumberFormat from \"react-number-format\";\nimport AmountToggle from \"./Generalui/AmountToggle\";\nimport { useDispatch } from \"react-redux\";\nimport { ADD_CART_ITEM_REQUEST, CLEAR_CART_REQUEST } from \"../reducers/cart\";\nimport { INITIATE_QUANTITY_REQUEST } from \"../reducers/menu\";\nimport { useSelector } from \"react-redux\";\nimport { useState, useEffect } from \"react\";\nimport OneSignal from \"react-onesignal\";\nimport { onClickPayment } from \"./Generalui/Payment\";\nimport ModalInterface from \"../components/Generalui/Modal\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nconst ProductCard = ({\n  product\n}) => {\n  console.log(product);\n  const {\n    0: toggleModal,\n    1: setToggleModal\n  } = useState(false);\n  const {\n    0: IMP,\n    1: setIMP\n  } = useState();\n\n  const onChangeToggleModal = () => setToggleModal(prev => !prev);\n\n  const dispatch = useDispatch();\n  const {\n    isLoggedIn,\n    session\n  } = useSelector(state => state.user);\n  useEffect(() => {\n    const {\n      IMP\n    } = window;\n    setIMP(IMP);\n  }, []);\n\n  const onClickAddCart = () => {\n    const discountedProduct = _objectSpread(_objectSpread({}, product), {}, {\n      price: product.Product.price * (100 - product.discount) * 0.01,\n      amount: product.Product.price * (100 - product.discount) * 0.01 * product.quantity\n    });\n\n    dispatch({\n      type: ADD_CART_ITEM_REQUEST,\n      product: discountedProduct\n    });\n    dispatch({\n      type: INITIATE_QUANTITY_REQUEST,\n      data: product\n    });\n  };\n\n  const paymentStart = async () => {\n    await dispatch({\n      type: CLEAR_CART_REQUEST\n    });\n    return onClickPayment(\"single\", product, isLoggedIn, session, onChangeToggleModal);\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(ModalInterface, {\n      content: \"로그인을 하셔야 합니다.\",\n      toggleModal: toggleModal,\n      onChangeToggleModal: onChangeToggleModal,\n      title: \"경고\"\n    }), /*#__PURE__*/_jsx(Card, {\n      title: /*#__PURE__*/_jsxs(Space, {\n        children: [/*#__PURE__*/_jsx(Typography.Title, {\n          level: 3,\n          children: product.Product.title\n        }), \" \", /*#__PURE__*/_jsxs(Tag, {\n          color: \"magenta\",\n          children: [\"-\", product.discount, \"%\"]\n        })]\n      }),\n      actions: [/*#__PURE__*/_jsx(\"div\", {\n        onClick: paymentStart,\n        children: \"\\uC989\\uC2DC \\uAD6C\\uB9E4\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        onClick: onClickAddCart,\n        children: \"\\uC7A5\\uBC14\\uAD6C\\uB2C8\"\n      })],\n      cover: /*#__PURE__*/_jsx(\"img\", {\n        style: {\n          border: `1px solid #EFF2F5`\n        },\n        src: product.Product && product.Product.Images[0] && `${process.env.BACKEND_IP}/uploads/${product.Product.Images[0].url}`\n      }),\n      hoverable: true,\n      children: /*#__PURE__*/_jsx(Card.Meta, {\n        description: /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(Row, {\n            gutter: [16, 16],\n            align: \"middle\",\n            justify: \"end\",\n            children: [/*#__PURE__*/_jsx(Col, {\n              md: 16,\n              xs: 16,\n              style: {\n                display: \"inline-block\"\n              },\n              children: /*#__PURE__*/_jsxs(_Fragment, {\n                children: [/*#__PURE__*/_jsx(\"h5\", {\n                  children: \"\\uAC00\\uACA9\"\n                }), /*#__PURE__*/_jsxs(Space, {\n                  align: \"center\",\n                  children: [/*#__PURE__*/_jsxs(\"h1\", {\n                    style: {\n                      color: \"#FF5733\",\n                      fontWeight: \"bold\"\n                    },\n                    children: [/*#__PURE__*/_jsx(NumberFormat, {\n                      value: product.Product.price * (100 - product.discount) * 0.01,\n                      displayType: \"text\",\n                      thousandSeparator: true\n                    }), \"\\uC6D0\"]\n                  }), /*#__PURE__*/_jsxs(Tag, {\n                    children: [/*#__PURE__*/_jsx(NumberFormat, {\n                      value: product.Product.price,\n                      displayType: \"text\",\n                      thousandSeparator: true\n                    }), \"\\uC6D0\"]\n                  }), \"  \"]\n                })]\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              md: 8,\n              xs: 8,\n              children: /*#__PURE__*/_jsx(AmountToggle, {\n                id: product.id,\n                quantity: product.quantity\n              })\n            })]\n          }), /*#__PURE__*/_jsx(Divider, {}), /*#__PURE__*/_jsxs(Row, {\n            align: \"middle\",\n            justify: \"center\",\n            children: [/*#__PURE__*/_jsx(Col, {\n              span: 8,\n              xs: 8,\n              children: /*#__PURE__*/_jsx(\"div\", {\n                children: \"\\uCD1D \\uC8FC\\uBB38\\uAE08\\uC561\"\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              span: 16,\n              xs: 16,\n              children: /*#__PURE__*/_jsx(\"div\", {\n                style: {\n                  textAlign: \"right\"\n                },\n                children: /*#__PURE__*/_jsxs(\"h1\", {\n                  children: [/*#__PURE__*/_jsx(NumberFormat, {\n                    value: product.Product.price * (100 - product.discount) * 0.01 * product.quantity,\n                    displayType: \"text\",\n                    thousandSeparator: true\n                  }), \"\\uC6D0\"]\n                })\n              })\n            })]\n          })]\n        })\n      })\n    }, product.id)]\n  });\n};\n\nexport default ProductCard;","map":{"version":3,"sources":["C:/Users/hoyuen/Documents/dev/project1/frontend/components/ProductCardTest.js"],"names":["Card","Col","Space","Row","Divider","message","Typography","Modal","Tag","NumberFormat","AmountToggle","useDispatch","ADD_CART_ITEM_REQUEST","CLEAR_CART_REQUEST","INITIATE_QUANTITY_REQUEST","useSelector","useState","useEffect","OneSignal","onClickPayment","ModalInterface","ProductCard","product","console","log","toggleModal","setToggleModal","IMP","setIMP","onChangeToggleModal","prev","dispatch","isLoggedIn","session","state","user","window","onClickAddCart","discountedProduct","price","Product","discount","amount","quantity","type","data","paymentStart","title","border","Images","process","env","BACKEND_IP","url","display","color","fontWeight","id","textAlign"],"mappings":"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","sourcesContent":["import { Card, Col, Space, Row, Divider, message, Typography, Modal, Tag } from \"antd\";\nimport NumberFormat from \"react-number-format\";\nimport AmountToggle from \"./Generalui/AmountToggle\";\nimport { useDispatch } from \"react-redux\";\nimport { ADD_CART_ITEM_REQUEST, CLEAR_CART_REQUEST } from \"../reducers/cart\";\nimport { INITIATE_QUANTITY_REQUEST } from \"../reducers/menu\";\nimport { useSelector } from \"react-redux\";\nimport { useState, useEffect } from \"react\";\nimport OneSignal from \"react-onesignal\";\nimport { onClickPayment } from \"./Generalui/Payment\";\nimport ModalInterface from \"../components/Generalui/Modal\";\n\nconst ProductCard = ({ product }) => {\n  console.log(product);\n  const [toggleModal, setToggleModal] = useState(false);\n  const [IMP, setIMP] = useState();\n  const onChangeToggleModal = () => setToggleModal((prev) => !prev);\n  const dispatch = useDispatch();\n\n  const { isLoggedIn, session } = useSelector((state) => state.user);\n\n  useEffect(() => {\n    const { IMP } = window;\n    setIMP(IMP);\n  }, []);\n\n  const onClickAddCart = () => {\n    const discountedProduct = {\n      ...product,\n      price: product.Product.price * (100 - product.discount) * 0.01,\n      amount: product.Product.price * (100 - product.discount) * 0.01 * product.quantity,\n    };\n    dispatch({\n      type: ADD_CART_ITEM_REQUEST,\n      product: discountedProduct,\n    });\n    dispatch({ type: INITIATE_QUANTITY_REQUEST, data: product });\n  };\n\n  const paymentStart = async () => {\n    await dispatch({ type: CLEAR_CART_REQUEST });\n    return onClickPayment(\"single\", product, isLoggedIn, session, onChangeToggleModal);\n  };\n\n  return (\n    <>\n      <ModalInterface\n        content={\"로그인을 하셔야 합니다.\"}\n        toggleModal={toggleModal}\n        onChangeToggleModal={onChangeToggleModal}\n        title={\"경고\"}\n      />\n      <Card\n        key={product.id}\n        title={\n          <Space>\n            <Typography.Title level={3}>{product.Product.title}</Typography.Title>{\" \"}\n            <Tag color={\"magenta\"}>-{product.discount}%</Tag>\n          </Space>\n        }\n        actions={[\n          <div onClick={paymentStart}>즉시 구매</div>,\n          <div onClick={onClickAddCart}>장바구니</div>,\n        ]}\n        cover={\n          <img\n            style={{ border: `1px solid #EFF2F5` }}\n            src={\n              product.Product &&\n              product.Product.Images[0] &&\n              `${process.env.BACKEND_IP}/uploads/${product.Product.Images[0].url}`\n            }\n          />\n        }\n        hoverable\n      >\n        <Card.Meta\n          description={\n            <>\n              <Row gutter={[16, 16]} align={\"middle\"} justify={\"end\"}>\n                <Col md={16} xs={16} style={{ display: \"inline-block\" }}>\n                  <>\n                    <h5>가격</h5>\n                    <Space align=\"center\">\n                      <h1 style={{ color: \"#FF5733\", fontWeight: \"bold\" }}>\n                        <NumberFormat\n                          value={product.Product.price * (100 - product.discount) * 0.01}\n                          displayType={\"text\"}\n                          thousandSeparator={true}\n                        />\n                        원\n                      </h1>\n                      <Tag>\n                        <NumberFormat\n                          value={product.Product.price}\n                          displayType={\"text\"}\n                          thousandSeparator={true}\n                        />\n                        원\n                      </Tag>\n                      {\"  \"}\n                    </Space>\n                  </>\n                </Col>\n                <Col md={8} xs={8}>\n                  <AmountToggle id={product.id} quantity={product.quantity} />\n                </Col>\n              </Row>\n              <Divider />\n              <Row align={\"middle\"} justify={\"center\"}>\n                <Col span={8} xs={8}>\n                  <div>총 주문금액</div>\n                </Col>\n                <Col span={16} xs={16}>\n                  <div style={{ textAlign: \"right\" }}>\n                    <h1>\n                      <NumberFormat\n                        value={\n                          product.Product.price * (100 - product.discount) * 0.01 * product.quantity\n                        }\n                        displayType={\"text\"}\n                        thousandSeparator={true}\n                      />\n                      원\n                    </h1>\n                  </div>\n                </Col>\n              </Row>\n            </>\n          }\n        />\n      </Card>\n    </>\n  );\n};\n\nexport default ProductCard;\n"]},"metadata":{},"sourceType":"module"}